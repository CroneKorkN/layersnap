#!/bin/bash

# "-" params
ACTION=status
while [[ $# -gt 1 ]]
do
  key="$1"
  case $key in
    -m|--mount)
      ACTION=mount 
      shift
    ;;

    -s|--snapshot)
      ACTION=snapshot
      shift
    ;;

    -c|--checkout)
      ACTION=checkout
      shift
    ;;

    -r|--restore)
      ACTION=restore
      VALUE="$2"
      shift
    ;;

    -m|--merge)
      ACTION=merge
      shift
    ;;
  esac
done

# last param
if [[ -n $1 ]]; then
  #TargetPath=$(realpath $1) # bug: follows symlink
  TargetPath="$(pwd)/$1"
else
  echo "ERROR: please provide a target-dir!"
fi

# http://stackoverflow.com/questions/192249/how-do-i-parse-command-line-arguments-in-bash
